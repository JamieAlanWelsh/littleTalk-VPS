{% extends "base.html" %}
{% block title %}Invite Staff{% endblock %}
{% block content %}

<h2>Invite Staff</h2>

<form method="post">
    {% csrf_token %}
    <p>
        {{ form.email.label_tag }}<br>
        {{ form.email }}
        {% if form.email.errors %}
            <div class="error-message">{{ form.email.errors.0 }}</div>
        {% endif %}
    </p>
    <p>
        {{ form.role.label_tag }}<br>
        {{ form.role }}
        {% if form.role.errors %}
            <div class="error-message">{{ form.role.errors.0 }}</div>
        {% endif %}
    </p>
    <button type="submit" class="btn btn--yellow">Send Invite</button>
</form>

<hr>

<h3>Pending Invites</h3>
<ul>
    {% for invite in invites %}
        <li>
            {{ invite.email }} — {{ invite.role|capfirst }} — Sent by {{ invite.sent_by.get_full_name|default:invite.sent_by.username }} — {{ invite.created_at|date:"M j, Y H:i" }}
            {% if invite.used %}(Used){% else %}(Pending){% endif %}
        </li>
    {% empty %}
        <li>No invites yet.</li>
    {% endfor %}
</ul>

{% endblock %}