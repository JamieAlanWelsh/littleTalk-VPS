{% extends 'base.html' %}
{% load static %}

{% block title %}Chatterdillo | {{ game.title }}{% endblock %}

{% block content %}

<h1>Exercise Guide & Tutorial</h1>

<div class="container-box pt-70">

    <!-- Back Arrow -->
    <a href="{% url 'practise' %}" class="back-arrow" aria-label="Go back">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" 
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="arrow-icon">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
    </a>

    <!-- Exercise Selector Dropdown -->
    <div class="exercise-selector-wrapper">
        <label for="exercise-dropdown" class="label">Select an Exercise:</label>
        <select id="exercise-dropdown" class="select" onchange="navigateToExercise(this.value)">
            <option value="">-- Choose an exercise --</option>
            {% for game_id, game_details in game_descriptions.items %}
                <option value="{% url 'game_description' game_id %}" {% if game_id == current_game_name %}selected{% endif %}>
                    {{ game_details.title }}
                </option>
            {% endfor %}
        </select>
    </div>

    <h2 class="heading-left">{{ game.title }}</h2>
    
    <p>{{ game.description }}</p>

    <div class="exercise-video-container">
        <div class="exercise-video-wrapper">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/{{ game.youtube_video_id }}" 
                title="Exercise Guide Video" frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
            </iframe>
        </div>
    </div>

    <h2 class="heading-left">Develops children's ability to:</h2>
    <div class="skills-list">
        <ul>
            <li>{{ game.bullet1 }}</li>
            <li>{{ game.bullet2 }}</li>
            <li>{{ game.bullet3 }}</li>
        </ul>
    </div>

    <h2 class="heading-left">How to Choose the Right Level:</h2>
    <p>{{ game.learninglevel1 }}</p>
    <p>{{ game.learninglevel2 }}</p>

    <!-- Start button -->
    <div class="description-button-wrapper">
        <a href="{% static 'exercises/'|add:game.static_name|add:'/index.html' %}" target="_blank" class="btn btn--green btn--large">
            START
        </a>
    </div>
</div>

<script>
    function navigateToExercise(url) {
        if (url) {
            window.location.href = url;
        }
    }
</script>
{% endblock %}